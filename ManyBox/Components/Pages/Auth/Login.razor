@page "/login"

<div class="login-page">
    <div class="login-background">
        <div class="background-gradient"></div>
        <div class="background-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
        </div>
    </div>

    <div class="login-container">
        <div class="login-card">
            <div class="card-header">
                <h2 class="card-title">Iniciar Sesión</h2>
                <p class="card-subtitle">Accede a tu cuenta para continuar</p>
            </div>

            <EditForm Model="@loginModel" OnValidSubmit="OnLogin" class="login-form">
                <DataAnnotationsValidator />
                <div class="form-group">
                    <label for="usuario" class="form-label">Usuario</label>
                    <InputText id="usuario" class="form-control" @bind-Value="loginModel.Usuario" placeholder="Ingresa tu usuario" />
                    <ValidationMessage For="@(() => loginModel.Usuario)" class="validation-message" />
                </div>
                <div class="form-group">
                    <label for="password" class="form-label">Contraseña</label>
                    <InputText id="password" type="password" class="form-control" @bind-Value="loginModel.Password" placeholder="Ingresa tu contraseña" />
                    <ValidationMessage For="@(() => loginModel.Password)" class="validation-message" />
                </div>
                <button type="submit" class="login-button" disabled="@isLoading">
                    @if (isLoading)
                    {
                        <div class="button-spinner"></div>
                        <span>Iniciando sesión...</span>
                    }
                    else
                    {
                        <span>Iniciar Sesión</span>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10 3L8.59 4.41L13.17 9H3V11H13.17L8.59 15.59L10 17L17 10L10 3Z" fill="currentColor" />
                        </svg>
                    }
                </button>
            </EditForm>

            @if (loginExitoso)
            {
                <div class="alert alert-success">
                    <div class="alert-icon">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10 2C5.58 2 2 5.58 2 10C2 14.42 5.58 18 10 18C14.42 18 18 14.42 18 10C18 5.58 14.42 2 10 2ZM8 14L4 10L5.41 8.59L8 11.17L14.59 4.58L16 6L8 14Z" fill="currentColor" />
                        </svg>
                    </div>
                    <span>¡Bienvenido, @loginModel.Usuario!</span>
                </div>
            }

            @if (!string.IsNullOrEmpty(errorMessage))
            {
                <div class="mb-alert mb-alert-error">@errorMessage</div>
            }

            <div class="card-footer">
                <p class="footer-text">¿Olvidaste tu contraseña? <a href="#" class="footer-link">Recuperar</a></p>
            </div>
        </div>
    </div>
</div>
